<!DOCTYPE html>
<html lang="ca">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>♥ Rasca i guarda ♥</title>
    
			<!-- Precarreguem les imatges decoratives -->

    <link rel="preload" as="image" href="Fons.png" />
    <link rel="preload" as="image" href="Corona.png" />
    <link rel="preload" as="image" href="rama superior.png" />
    <link rel="preload" as="image" href="rama inferior2.png" />
    <link rel="preload" as="audio" href="wedding_joy.mp3" type="audio/mpeg">
    
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display&amp;family=Great+Vibes&amp;display=swap" rel="stylesheet" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Playfair Display', serif;
            background-color: #f8f1e7;			/* fons crema */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100dvh; 			/* compatible amb mòbils moderns */
        }

        .invitacio {
   	 width: 90%;                      		 /* Amplada relativa al viewport */
   	 max-width: 400px;               		 /* Límit màxim de mida */
    	aspect-ratio: 2 / 3;            		 /* Proporció vertical */
    	background: url('Fons.png') center/cover no-repeat;  /* Fons decoratiu */
    	border-radius: 12px;            		 /* Cantonades arrodonides */
    	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);  /* Ombra suau */
    	position: relative; 			/*Permet posicionar elements interns amb absolute (com les branques o el canvas)*/
    	overflow: hidden; 				/*Si un element intern surt fora, no es veu*/
    	text-align: center;
    	padding-top: 40px;
	padding-bottom: 40px;
    	display: flex;
    	flex-direction: column;
    	justify-content: space-between;
   	}

        .noms {
            font-family: 'Great Vibes', cursive;
            font-size: 36px;
            margin: 0 auto;
            color: #3b3b3b;
            user-select: none;
            position: relative;
    	    top: 30px; 					/* Mou cap avall */
  	    position: relative; 			/* perquè la corona es posicioni respecte a aquest bloc */
 	    z-index: 2; 				/* Manté el text per damunt de la corona */
         }

.corona-decorativa {
  position: absolute;
  top: 50%;
  left: 55%;
  width: 235px;
  aspect-ratio: 1/1;
  transform: translate(-50%, -50%);
  background-image: url('Corona.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  z-index: 1; 						/* per situar-la darrere del nom */
  pointer-events: none;
}
        

        .text-superior {
            font-size: 16px;
            font-weight: 500;
            font-family: 'Playfair Display';	/* o 'Great Vibes', cursive */
            text-align: center;         
	    color: #478299;			/*color*/
            margin-bottom: -30px;		/* Distància amb el cor */
            user-select: none;
        }
	.contenidor-rasca {
            position: relative;
            width: 220px;
            height: 180px;
            margin-left: auto;			/* Per mantenir el centrat horitzontal */
            margin-right: auto;			/* Per mantenir el centrat horitzontal */
            margin-bottom: 20px;		/* Per mantenir el marge inferior */
	    margin-top: -60px;
  	display: flex;
  	justify-content: center;
  	align-items: center;
        }

        .data-oculta {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 22px;
            font-weight: bold;
            color: #5e4b3c;
            user-select: none;
            pointer-events: none;
        }

					/*Afegit: animació de batec suau */
@keyframes batecSuau {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.05); }
}

.bategant {
  animation: batecSuau 3s ease-in-out infinite;
  transition: opacity 1s ease-out;
  opacity: 1;
}

.bategant.paused {
  opacity: 0;
}

/* Bloc de branques amb aparició i flotació */
.bloc-branques {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 260px;
  height: 220px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 1;
  animation: entradaBranques 2s ease-out forwards,
             flotacioSuau 6s ease-in-out infinite;
  animation-delay: 0.5s, 2s; /* ➤ Primer apareix, després comença a flotar */
  opacity: 0; /* important per començar invisible */
}

/* Entrada suau */
@keyframes entradaBranques {
  0%   { opacity: 0; transform: translate(-50%, -60%); }
  100% { opacity: 1; transform: translate(-50%, -50%); }
}

/* Flotació vertical */
@keyframes flotacioSuau {
  0%, 100% { transform: translate(-50%, -50%); }
  50%      { transform: translate(-50%, -55%); }
}

/* Branca superior */
.branca-superior {
  position: absolute;
  top: 20px;
  left: 10%;
  width: 100px;
  height: 100px;
  background-image: url('rama superior.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  transform: translateX(-50%);
  pointer-events: none;
}

/* Branca inferior */
.branca-inferior {
  position: absolute;
  bottom: 20px;
  left: 85%;
  width: 100px;
  height: 100px;
  background-image: url('rama inferior2.png');
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  transform: translateX(-50%);
  pointer-events: none;
}

/* Animació individual superior */
.animacio-superior {
  animation: brisaSuperior 6s ease-in-out infinite alternate;
}
@keyframes brisaSuperior {
  0%, 100% { transform: translateX(-50%) rotate(-8deg); }
  50%      { transform: translateX(-50%) rotate(4deg); }
}

/* Animació individual inferior */
.animacio-inferior {
  animation: brisaInferior 8s ease-in-out infinite alternate;
}
@keyframes brisaInferior {
  0%, 100% { transform: translateX(-50%) rotate(-20deg); }
  50%      { transform: translateX(-50%) rotate(-45deg); }
}

        canvas {
            position: relative;
            width: 260px;
            height: 220px;
            border-radius: 15px;
            cursor: pointer;
            z-index: 2;
            touch-action: none;
        }

    </style>
</head>

<body>

    <div class="invitacio">
        <div class="noms">
	<div class="corona-decorativa"></div>
	Claustre <br> & <br> Oriol
</div>
	
        <div class="text-superior"> L’amor no avisa, <br> però nosaltres sí. <br> Guarda't el dia!</div>
        <div class="contenidor-rasca">
            <div class="data-oculta">20 de juny<br>de 2026</div>
        
<div class="bloc-branques">
  <div class="branca-superior animacio-superior"></div>
  <div class="branca-inferior animacio-inferior"></div>
</div>
	<canvas id="scratchCanvas" width="260" height="220" title="Rasca aquí"></canvas>  
        </div>
    </div>

    <audio id="musicaFons" autoplay loop muted>
        <source src="wedding_joy.mp3" type="audio/mpeg" />
    </audio>

    <script>
        /* Rasca cor daurat */
        const canvas = document.getElementById('scratchCanvas');
        const ctx = canvas.getContext('2d');
canvas.classList.add('bategant');
        function drawHeart(ctx, x, y, width, height, color) {
        ctx.save();     
    /*Ombra*/
    ctx.shadowColor = 'rgba(0, 0, 0, 0.2)';
    ctx.shadowBlur = 12;
    ctx.shadowOffsetX = 0;
    ctx.shadowOffsetY = 6;

	/*Dibuix del cor*/
		ctx.fillStyle = color;
            ctx.beginPath();
            ctx.moveTo(x + width / 2, y + height / 5);
            ctx.bezierCurveTo(x + width / 2, y, x, y, x, y + height / 3);
            ctx.bezierCurveTo(x, y + height * 2 / 3, x + width / 2, y + height * 4 / 5, x + width / 2, y + height);
            ctx.bezierCurveTo(x + width / 2, y + height * 4 / 5, x + width, y + height * 2 / 3, x + width, y + height / 3);
            ctx.bezierCurveTo(x + width, y, x + width / 2, y, x + width / 2, y + height / 5);
            ctx.closePath();
            ctx.fill();
        }

        function init() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawHeart(ctx, 25, 20, 200, 180, '#d4af37');
        }

        init();

        let isDrawing = false;

        function getPointerPos(evt) {
            const rect = canvas.getBoundingClientRect();
            let x, y;
            if (evt.touches && evt.touches.length > 0) {
                x = evt.touches[0].clientX - rect.left;
                y = evt.touches[0].clientY - rect.top;
            } else {
                x = evt.clientX - rect.left;
                y = evt.clientY - rect.top;
            }
            return {
                x,
                y
            };
        }

        function scratch(evt) {
            if (!isDrawing) return;
            evt.preventDefault();
            const {
                x,
                y
            } = getPointerPos(evt);
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath();
            ctx.arc(x, y, 20, 0, Math.PI * 2);
            ctx.fill();
            ctx.globalCompositeOperation = 'source-over';
        }

        canvas.addEventListener('mousedown', e => {
            isDrawing = true;
            scratch(e);
        });
        canvas.addEventListener('touchstart', e => {
            isDrawing = true;
            scratch(e);
        }, {
            passive: false
        });

        canvas.addEventListener('mousemove', scratch);
        canvas.addEventListener('touchmove', scratch, {
            passive: false
        });

        canvas.addEventListener('mouseup', () => {
            isDrawing = false;
        });
        canvas.addEventListener('touchend', () => {
            isDrawing = false;
        });

        const music = document.getElementById('musicaFons');

        function unmuteMusic() {
            music.muted = false;
            music.play();
            window.removeEventListener('click', unmuteMusic);
            window.removeEventListener('touchstart', unmuteMusic);
        }
        window.addEventListener('click', unmuteMusic);
        window.addEventListener('touchstart', unmuteMusic);
    </script>

</body>

</html> 